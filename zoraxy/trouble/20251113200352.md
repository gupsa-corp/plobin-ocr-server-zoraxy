# Zoraxy 서비스 시작 및 프록시 설정 문제 해결

## 발생 시간
2025년 11월 13일 18:52 ~ 20:01

## 문제 상황
1. **Zoraxy 서비스가 시작되지 않음**
   - 사용자가 "zoraxy 안켜져" 요청

2. **www.plobin.com 프록시 접근 불가**
   - 백엔드 서버(192.168.1.245:30011)는 정상 작동
   - 도메인을 통한 접근 시 404 에러 발생

## 원인 분석

### 1차 문제: 방화벽 설정
- UFW에서 포트 10001이 허용되지 않음
- Zoraxy 관리 인터페이스 접근 불가

### 2차 문제: TLS 설정 오류
- Zoraxy 설정에서 `RequireTLS: true`로 설정됨
- 백엔드 서버는 HTTP(30011)로 서비스 중
- HTTPS로 백엔드 접근 시도로 인한 404 에러

## 해결 과정

### 1단계: 서비스 상태 확인
```bash
# 컨테이너 상태 확인
docker ps | grep zoraxy

# 로그 확인
docker logs zoraxy-zoraxy-1
```

### 2단계: 방화벽 설정
```bash
# 포트 10001 허용
sudo ufw allow 10001

# 방화벽 완전 비활성화 (개발환경)
sudo ufw disable
```

### 3단계: 프록시 설정 수정
```bash
# 설정 파일 위치: zoraxy/config/conf/proxy/www.plobin.com.config
# RequireTLS: true → false 변경
```

### 4단계: 서비스 재시작
```bash
cd zoraxy
docker compose restart
```

## 해결 결과
- ✅ Zoraxy 관리 인터페이스 접근 가능 (http://localhost:10001)
- ✅ www.plobin.com → 192.168.1.245:30011 프록시 정상 작동
- ✅ HTTPS 접근 시 200 OK 응답

## 학습 사항
1. **방화벽 확인**: 서비스 접근 불가 시 방화벽 설정을 우선 확인
2. **TLS 설정**: 백엔드 서버 프로토콜과 프록시 설정의 일치 필요
3. **로그 분석**: 컨테이너 로그에서 설정 파일 누락 경고 확인 가능

## 설정 파일 위치
- Docker Compose: `zoraxy/docker-compose.yml`
- 환경 변수: `zoraxy/.env`
- 프록시 설정: `zoraxy/config/conf/proxy/`

## 테스트 명령어
```bash
# 직접 접근 테스트
curl -I http://192.168.1.245:30011

# 프록시 테스트
curl -I https://www.plobin.com
```